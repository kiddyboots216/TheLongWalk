<!DOCTYPE html>
<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title></title>
    <style>
        .distance {
            font-family: 'Roboto', sans-serif;
            font-size: 18px;
            padding-left: 10%;
            padding-right: 10%;
            padding-bottom: 30px;
        }
        .schedules {
            font-family: 'Roboto', sans-serif;
            font-size: 18px;
            padding-left: 10%;
            padding-right: 10%;
            padding-bottom: 30px;
        }
        .description {
            font-family: 'Roboto', sans-serif;
            font-size: 18px;
            padding-left: 10%;
            padding-right: 10%;
            padding-top: 60px;
            padding-bottom: 30px;
        }
        .button {
            font-family: 'Roboto', sans-serif;
            font-size: 18px;
            font-weight: bold;
            border-radius: 15px;
            background: #4d4d4d;
            color: white;
            border: none;
            width: 200px;
            height: 50px;
            margin-left: 43%;
            margin-bottom: 100px;
        }
    </style>
    <link href="styles2.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
</head>

<body>
    <header class="qp-ui" data-qp-ui="{'Peekaboo': {'mobile': 72,'desktop-sm': 72,'default': 192}}">
        <div class="header-wrapper qp-ui" data-qp-ui="{'Peekaboo': {'mobile': 28,'desktop-sm': 28,'default': 82}}">
          <div class="header-title">
            <span class="section-title">Schedule Planner</span>
            <span class="chapter-title">
              <span class="title-separator">â€“</span> Introduction
            </span>
          </div>
        </div>
    </header>
    <div class = "description">Sorts your schedules generated by Schedule Planner by distance traveled between classes</div>
    <div id="test" class = "distance">
    </div>
    <p id="test2" class = "schedules">

    </p>
    <!-- First location: <input type="text" id="place1" value="name"><br> Last location: <input type="text" id="place2" value="gg"><br> -->
    <button type="button" name="button" class = "button" onclick="display()" value="submit">TEST ME</button>
    <script type="text/javascript">
    /*
    Locations of all classes on campus
    */
        var geolocations = {
            "Cory": [37.875257, -122, 257324],
            "Soda": [37.875826, -122.258826],
            "Etcheverry": [37.875850, -122.259313],
            "Sutardja Dai": [37.874877, -122.258306],
            "Hearst Memorial Mining Building": [37.874407, -122.257246],
            "Pimentel": [37.873429, -122.256039],
            "Zellerbach": [37.869064, -122.260922],
            "Barrows": [37.870032, -122.257931],
            "Dwinelle": [37.870032, -122.257931],
            "Wheeler": [37.871238, -122.259227],
            "College of Letters and Sciences": [37.871327, -122.260091],
            "Valley of Life Sciences": [37.871522, -122.262028],
            "LeConte": [37.872860, -122.257513],
            "Moffitt": [37.872677, -122.260899],
            "Tolman": [37.874308, -122.263891],
            "South": [37.871429, -122.258493],
            "Li Ka Shing": [37.873151, -122.265155],
            "Pauley Ballroom": [37.868957, -122.259597],
            "Berkeley School of Information": [37.871290, -122.258508],
            "Birge": [37.872229, -122.257193],
            "Campbell": [37.873010, -122.256965],
            "Evans": [37.873700, -122.257852],
            "Latimer": [37.873116, -122.256007],
            "McCone": [37.874165, -122.259653],
            "California": [37.871840, -122.260346],
            "Jacobs": [37.876014, -122.258822],
            "Morgan": [37.873314, -122.264210],
            "Haas Pavilion": [37.869416, -122.262322],
            "Sproul": [37.869604, -122.258927],
            "Hertz": [37.871090, -122.255603],
            "Morrison": [37.870895, -122.256373],
            "College of Environmental Design": [37.870595, -122.254962],
            "Boalt": [37.869909, -122.253388],
            "Hearst Gymnasium": [37.869467, -122.257487],
            "Stephens": [37.871263, -122.257583],
            "Doe": [37.872184, -122.259564],
            "Bancroft": [37.872315, -122.258666],
            "Davis": [37.874641, -122.258119],
            "Anthony": [37.870610, -122.258177],
            "Barker": [37.873969, -122.265442],
            "Blum": [37.875025, -122.258796],
            "Cheit": [37.871819, -122.254257],
            "Durant": [37.871253, -122.260096],
            "Eshleman": [37.868761, -122.260489],
            "Giannini": [37.873535, -122.262300],
            "Gilman": [37.872633, -122.256321],
            "Haviland": [37.873682, -122.261048],
            "Hesse": [37.874317, -122.259353],
            "Hildebrand": [37.872539, -122.255723],
            "Hilgard": [37.873320, -122.263406],
            "Koshland": [37.873944, -122.264898],
            "Kroeber": [37.869852, -122.255150],
            "Lewis": [37.873070, -122.255189],
            "Manville": [37.865611, -122.266851],
            "McLaughlin": [37.873804, -122.258998],
            "Minor": [37.871412, -122.254692],
            "Moses": [37.871024, -122.258084],
            "Mulford": [37.872841, -122.264498],
            "North Gate": [37.875228, -122.259658],
            "O'Brien": [37.874599, -122.259037],
            "Senior": [37.872097, -122.255313],
            "Stanley": [37.874232, -122.256170],
            "Tan": [37.873087, -122.256396],
            "University": [37.871903, -122.266296],
            "Warren": [37.874406, -122.266766],
            "Wellman": [37.873173, -122.262488],
            "Wurster": [37.870727, -122.254615]
        };


        function Course(name, days, time, location, number) {
            this.name = name;
            this.days = days;
            this.time = time;
            this.location = location;
            this.number = number;
        }

        test_course_list = ["Electrical Engineering 16A", ["M", "W", "F"], 11, "Dwinelle", 53721];

        function create_course_object(course_list) {

            var name = course_list[0];
            var days = course_list[1];
            var time = course_list[2];
            var location = course_list[3];
            var number = course_list[4];

            return new Course(name, days, time, location, number);
        }

        example_course = new Course("example", ["M", "W", "F"], 11, "Dwinelle");
        example_course2 = new Course("example2", ["M", "W", "F"], 12, "Cory");
        example_course3 = new Course("example3", ["T", "Th"], 14, "Evans");
        example_course4 = new Course("example4", ["M", "W", "F"], 5, "Soda");
        example_course5 = new Course("example5", ["T", "Th"], 9, "Pauley Ballroom");

        test_list_of_courses = [
            ["Electrical Engineering 16A", ["M", "W", "F"], 11, "Dwinelle", 35682],
            ["Computer Science 61A", ["M", "W", "F"], 14, "Pauley Ballroom", 57462],
            ["Math 54", ["T", "Th"], 8, "Hertz", 78996]
        ];
        test_list_of_courses2 = [
            ["Electrical Engineering 16B", ["M", "W", "F"], 10, "Morrison", 12435],
            ["Computer Science 61B", ["M", "W", "F"], 9, "Doe", 54362],
            ["Math 53", ["T", "Th"], 8, "Cory", 33345]
        ];
        test_list_of_courses3 = [
            ["CS70", ["M", "W"], 15, "Barrows", 35743],
            ["Computer Science 61C", ["M", "W", "F"], 18, "Pauley Ballroom", 23465],
            ["Anthro 2AC", ["T", "Th"], 11, "Hertz", 55432]
        ];

        function create_list_of_courses(list_input) {
            var list_of_courses = [];

            var arrayLength = list_input.length;

            for (var i = 0; i < arrayLength; i++) {

                var list_course = list_input[i];

                list_of_courses.push(create_course_object(list_course));

                //console.log(list_of_courses);
            }

            return list_of_courses;
        }

        create_list_of_courses(test_list_of_courses);

        function contains(a, obj) {
            for (var i = 0; i < a.length; i++) {
                if (a[i] === obj) {
                    return true;
                }
            }
            return false;
        }

        function generateSchedule(list_of_courses) {
            var list_of_courses = create_list_of_courses(list_of_courses);

            //console.log(list_of_courses);

            var monday = [];
            var tuesday = [];
            var wednesday = [];
            var thursday = [];
            var friday = [];

            var arrayLength = list_of_courses.length;

            for (var i = 0; i < arrayLength; i++) {

                var course = list_of_courses[i];

                if (contains(course.days, "M")) {
                    monday.push(course);
                }
                if (contains(course.days, "T")) {
                    tuesday.push(course);
                }
                if (contains(course.days, "W")) {
                    wednesday.push(course);
                }
                if (contains(course.days, "Th")) {
                    thursday.push(course);
                }
                if (contains(course.days, "F")) {
                    friday.push(course);
                }
            }

            var sorted_schedule = [
                [],
                [],
                [],
                [],
                []
            ];

            monday.sort(function(a, b) {
                return parseFloat(a.time) - parseFloat(b.time);
            });

            var arrayLength = monday.length;
            for (var i = 0; i < arrayLength; i++) {

                var course = monday[i];
                sorted_schedule[0].push(course);
            }

            tuesday.sort(function(a, b) {
                return parseFloat(a.time) - parseFloat(b.time);
            });

            var arrayLength = tuesday.length;
            for (var i = 0; i < arrayLength; i++) {

                var course = tuesday[i];
                sorted_schedule[1].push(course);
            }

            wednesday.sort(function(a, b) {
                return parseFloat(a.time) - parseFloat(b.time);
            });

            var arrayLength = wednesday.length;
            for (var i = 0; i < arrayLength; i++) {

                var course = wednesday[i];
                sorted_schedule[2].push(course);
            }

            thursday.sort(function(a, b) {
                return parseFloat(a.time) - parseFloat(b.time);
            });

            var arrayLength = thursday.length;
            for (var i = 0; i < arrayLength; i++) {

                var course = thursday[i];
                sorted_schedule[3].push(course);
            }

            friday.sort(function(a, b) {
                return parseFloat(a.time) - parseFloat(b.time);
            });

            var arrayLength = friday.length;
            for (var i = 0; i < arrayLength; i++) {

                var course = friday[i];
                sorted_schedule[4].push(course);
            }

            return sorted_schedule;
        }

        schedules = [generateSchedule(test_list_of_courses), generateSchedule(test_list_of_courses2), generateSchedule(test_list_of_courses3)];
        console.log(schedules);



        function getDistance(loc1, loc2) {
            var coord1 = getLocation(loc1);
            var coord2 = getLocation(loc2);
            var x1 = coord1[0];
            var x2 = coord2[0];
            var y1 = coord1[1];
            var y2 = coord2[1];
            return Math.sqrt(Math.pow((x2 - x1), 2) + Math.pow((y2 - y1), 2));
        }

        function getLocation(loc) {
            return geolocations[loc];
        }

        function display() {
            //console.log('lol');
            //document.getElementById("test2").innerHTML = "blze";

            //  var loc1 = document.getElementById('place1').value;
            //  var loc2 = document.getElementById('place2').value;
            //  var loc3 =
            //document.getElementById("test").innerHTML = maxDistanceSchedule(1);
            sortSchedules()
        }

        function distances(day) {
            //  console.log(day);
            var distance_list = [];
            for (var i = 0; i < day.length - 1; i++) {
                distance_list.push(getDistance(day[i].location, day[i + 1].location));
                console.log(day[i]);
            }
            //  console.log(distance_list)
            return distance_list;
        }

        function maxDistanceSchedule(numSchedule) {
            //  console.log("gg1");
            schedule_distances_list = [];
            for (var i = 0; i < schedules[numSchedule - 1].length; i++) {
                var distance_list = distances(schedules[numSchedule - 1][i]);
                var max_distance = 0;
                //        console.log("schedule " + i);
                for (var j = 0; j < distance_list.length; j++) {
                    max_distance += distance_list[j];
                    //          console.log(distance_list[j])
                }
                schedule_distances_list.push(max_distance);
            }
            var total_distance = 0;
            for (var k = 0; k < schedule_distances_list.length; k++) {
                total_distance += schedule_distances_list[k];
            }
            return total_distance;
        }

        function sortSchedules() {
            console.log(schedules)
            var schedule_distances = [];
            var schedules_copy = [];
            for (var i = 1; i < schedules.length + 1; i++) {
                schedule_distances.push(maxDistanceSchedule(i));
                //          console.log(i)
                //          console.log(maxDistanceSchedule(i))
            }
            console.log(schedule_distances)
                //  console.log(schedules)
            var dict = {}

            document.getElementById("test").innerHTML = "Distances of Each Schedule: <br><br>" + schedule_distances[0] + "<br><br>" + schedule_distances[1] + "<br><br>" + schedule_distances[2];
            var sorted_schedules = [];
            for (var i = 0; i < schedules.length; i++) {
                schedules_copy.push(schedules[i]);
            }
            var schedule_dist_copy = [];
            for (var i = 0; i < schedule_distances.length; i++) {
                schedule_dist_copy.push(schedule_distances[i]);
            }
            var w = schedules.length
            while (w > 0) {
                min_schedule = -1;
                min_distance = 100;
                console.log("Rip" + schedules_copy.length)
                for (var i = 0; i < schedule_dist_copy.length; i++) {
                    if (schedule_dist_copy[i] < min_distance) {
                        min_distance = schedule_dist_copy[i];
                        min_schedule = i;
                    }
                    if (schedules_copy.length == 1) {
                        //    console.log("nice meme" + i + " " + min_schedule + " " + schedule_dist_copy[i] + " " + schedules_copy.length)
                    }
                }
                //  console.log(min_schedule + " " + schedules_copy.length + " " + schedules[min_schedule]);
                sorted_schedules.push(schedules[min_schedule]);
                console.log("MIN:" + min_schedule)
                schedule_dist_copy[min_schedule] = 1000;
                w -= 1;
            }
            //  console.log(schedules);

            console.log("Sorted Schedules: " + sorted_schedules);
            console.log("LEngth" + sorted_schedules.length)
            for (var i = 0; i < sorted_schedules.length; i++) {
                console.log("Meme " + sorted_schedules[i])
                for (var j = 0; j < sorted_schedules[i].length; j++) {
                    for (var k = 0; k < sorted_schedules[i][j].length; k++) {
                        console.log(sorted_schedules[i][j][k])
                        sorted_schedules[i][j][k] = sorted_schedules[i][j][k].name + " " + sorted_schedules[i][j][k].number
                    }
                }
            }
            document.getElementById("test2").innerHTML = "Schedules Listed from Least to Greatest Distance <br><br> 1. " +
                "Monday: " + sorted_schedules[0][0] +
                "<br><br>&nbsp;&nbsp;&nbsp;Tuesday: " + sorted_schedules[0][1] +
                "<br><br>&nbsp;&nbsp;&nbsp;Wednesday: " + sorted_schedules[0][2] +
                "<br><br>&nbsp;&nbsp;&nbsp;Thursday: " + sorted_schedules[0][3] +
                "<br><br>&nbsp;&nbsp;&nbsp;Friday: " + sorted_schedules[0][4] +
                "<br><br> 2. " +
                "Monday: " + sorted_schedules[1][0] +
                "<br><br>&nbsp;&nbsp;&nbsp;Tuesday: " + sorted_schedules[1][1] +
                "<br><br>&nbsp;&nbsp;&nbsp;Wednesday: " + sorted_schedules[1][2] +
                "<br><br>&nbsp;&nbsp;&nbsp;Thursday: " + sorted_schedules[1][3] +
                "<br><br>&nbsp;&nbsp;&nbsp;Friday: " + sorted_schedules[1][4] +
                "<br><br> 3. " +
                "Monday: " + sorted_schedules[2][0] +
                "<br><br>&nbsp;&nbsp;&nbsp;Tuesday: " + sorted_schedules[2][1] +
                "<br><br>&nbsp;&nbsp;&nbsp;Wednesday: " + sorted_schedules[2][2] +
                "<br><br>&nbsp;&nbsp;&nbsp;Thursday: " + sorted_schedules[2][3] +
                "<br><br>&nbsp;&nbsp;&nbsp;Friday: " + sorted_schedules[2][4];
            return sorted_schedules;

        }
    </script>
</body>

</html>
